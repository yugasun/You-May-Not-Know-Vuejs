<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>你也许不知道的 Vuejs | 工欲善其事必先利其器</title>
    <meta name="description" content="Vue 从入门到精通系列">
    <link rel="icon" href="/You-May-Not-Know-Vuejs/logo.png">
  <script async="async" type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?22a0ab0b25c4b63f25e294e1585f3aa5";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script>
    
    <link rel="preload" href="/You-May-Not-Know-Vuejs/assets/css/styles.8c16a5c0.css" as="style"><link rel="preload" href="/You-May-Not-Know-Vuejs/assets/js/app.8c16a5c0.js" as="script"><link rel="preload" href="/You-May-Not-Know-Vuejs/assets/js/15.f98ca526.js" as="script"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/css/1.styles.d7e0337a.css"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/1.d7e0337a.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/10.d4d38b5c.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/11.a0c92858.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/12.7d4c9781.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/13.c15113c9.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/14.f14af779.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/16.0756c5e1.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/17.14df2db4.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/18.5c2715c0.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/19.b277ba6f.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/2.20d5ee32.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/20.adab3611.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/3.bda80ff8.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/4.2b6993a1.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/5.b42c65dc.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/6.d7819112.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/7.be44d24b.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/8.48b0d968.js"><link rel="prefetch" href="/You-May-Not-Know-Vuejs/assets/js/9.87cbe311.js">
    <link rel="stylesheet" href="/You-May-Not-Know-Vuejs/assets/css/styles.8c16a5c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/You-May-Not-Know-Vuejs/" class="home-link router-link-active"><!----><span class="site-name">
      你也许不知道的 Vuejs
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/art/" class="nav-link router-link-active">正文</a></div><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/donate/" class="nav-link">人之初</a></div><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/about/" class="nav-link">关于</a></div><a href="https://github.com/yugasun/You-May-Not-Know-Vuejs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/art/" class="nav-link router-link-active">正文</a></div><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/donate/" class="nav-link">人之初</a></div><div class="nav-item"><a href="/You-May-Not-Know-Vuejs/about/" class="nav-link">关于</a></div><a href="https://github.com/yugasun/You-May-Not-Know-Vuejs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/You-May-Not-Know-Vuejs/art/" aria-current="page" class="sidebar-link">前言</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-1.html" class="sidebar-link">花式渲染目标元素</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-2.html" class="sidebar-link">深入浅出响应式系统</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-3.html" class="sidebar-link">强大的指令系统</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-4.html" class="sidebar-link">组件式开发</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html" aria-current="page" class="active sidebar-link">工欲善其事必先利其器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#开发环境" class="sidebar-link">开发环境</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#模块化开发" class="sidebar-link">模块化开发</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#初始-webpack" class="sidebar-link">初始 webpack</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#实时重新加载-live-reloading" class="sidebar-link">实时重新加载(live reloading)</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#使用-npm-脚本" class="sidebar-link">使用 npm 脚本</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#css预处理器" class="sidebar-link">CSS预处理器</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#图片加载" class="sidebar-link">图片加载</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-5.html#专题目录" class="sidebar-link">专题目录</a></li></ul></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-6.html" class="sidebar-link">单文件组件</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-7.html" class="sidebar-link">使用ES6快乐的玩耍</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-8.html" class="sidebar-link">使用ESLint检查代码质量</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-9.html" class="sidebar-link">定制开发项目模板</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-10.html" class="sidebar-link">插件开发</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-11.html" class="sidebar-link">自定义路由实现</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-12.html" class="sidebar-link">状态管理</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-13.html" class="sidebar-link">最佳实践(1)</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-14.html" class="sidebar-link">最佳实践(2)</a></li><li><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-15.html" class="sidebar-link">最佳实践(3)</a></li></ul></div><div class="page"><div class="content"><h1 id="工欲善其事必先利其器"><a href="#工欲善其事必先利其器" aria-hidden="true" class="header-anchor">#</a> 工欲善其事必先利其器</h1><h2 id="开发环境"><a href="#开发环境" aria-hidden="true" class="header-anchor">#</a> 开发环境</h2><p>既然是实战，怎离不开项目开发的环境呢？先给大家推荐下我的个人开发环境：</p><blockquote><p><strong>硬件设备</strong>：Mac OSX<br><strong>编译器</strong>：Visual Studio Code<br><strong>命令行工具</strong>：iTerm2<br><strong>调试工具</strong>：Chrome Dev tool + vue-devtools<br><strong>版本管理</strong>：Git</p></blockquote><p>具体工具的操作界面和如何使用，这里就不展示了。随便用搜索引擎搜索，就是相关介绍。大家可以根据个人喜好，来选择适合你的开发环境。</p><h2 id="模块化开发"><a href="#模块化开发" aria-hidden="true" class="header-anchor">#</a> 模块化开发</h2><p>前面的文章中使用 Vue，都是直接引入源码方式来使用，但是实际开发中项目一般很复杂，并且会涉及到很多页面模板，不可能所有的功能我们都写在同一个js文件，然后在通过 script 标签引入，这样项目大了会越来越不易维护，所以项目需要模块化开发。</p><blockquote><p>关于什么是模块化，具体如何模块化构架我们的项目，推荐阅读 <a href="https://zhuanlan.zhihu.com/p/22890374" target="_blank" rel="noopener noreferrer">JavaScript 模块化入门Ⅰ：理解模块</a> 和 <a href="https://zhuanlan.zhihu.com/p/22945985" target="_blank" rel="noopener noreferrer">JavaScript 模块化入门Ⅱ：模块打包构建</a>。</p></blockquote><p>当项目代码多了，我们的模块文件越来越多，就需要工具来帮助我们更好的管理和打包这些模块，让我们能更好的关注模块化开发，而不是这些琐碎的事情。于是 <code>webpack</code> 类似的工具就应运而生，当然除了 <code>webpack</code> 还有很多类似的工具，他们各有各的优点，比如：<a href="https://github.com/rollup/rollup" target="_blank" rel="noopener noreferrer">rollup</a>、<a href="https://github.com/parcel-bundler/parcel" target="_blank" rel="noopener noreferrer">parcel</a>...。</p><p>今后文章所有的实例将用到 <code>webpack</code> 的 <code>3.x</code> 版本工具来结合Vue 完成开发工作。</p><h2 id="初始-webpack"><a href="#初始-webpack" aria-hidden="true" class="header-anchor">#</a> 初始 webpack</h2><p>这里不得不说一下，很多朋友在开发 Vue 项目的时候，一上来就使用 <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener noreferrer">vue-cli</a> 脚手架工具开发项目，虽然可以很快的构建项目模板，不用关注初始化配置问题。但是我不建议这么做，因为一上来就是 <code>vuejs + webpack + es6 + babel + eslint...</code> 等各种工具，有人都还不知道他们是什么，就开始用。出了问题，就不知道如何是好。虽然借助搜索引擎可以帮助我们解决80%的难题，但还是需要花费大量的精力去搜索查询，不断的尝试，等问题解决了，一天就过去了，得不偿失啊。</p><p>所以我建议先从学会使用 <code>webpack</code> 开始，一步一步的引入进来，会容易接受一些。毕竟这世界上大多数人都不是天才，要学会跑，得先学会走路。</p><blockquote><p>虽然当前社会比较浮躁，但是拥有一颗宁静的心，脚踏实地，才是成功之道啊~</p></blockquote><p>好了废话不多说，直接进入今天的正题，<strong>使用 webpack 愉快的进行 Vuejs 项目开发</strong>。</p><blockquote><p>在阅读下面代码之前，请提前熟悉 nodejs 模块的使用，包括基本的通过 npm 安装模块依赖和如何引入第三方模块使用，这里虽然会提到，但不会详细解释。</p></blockquote><p>我们先新建一个项目文件夹，在根目录下新建 <code>index.html</code>，代码如下：</p><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Vue webpack demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./build.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>命令行运行  <code>npm init</code>，按照交互提示，填写项目相关信息（当然都是英文，不懂得直接翻一下就明白了），填写完成后，项目根目录下会出现 <code>package.json</code> 文件（关于package.json文件内容具体介绍，可以阅读这篇文章：<a href="http://javascript.ruanyifeng.com/nodejs/packagejson.html" target="_blank" rel="noopener noreferrer">package.json文件</a>）。然后通过 <code>npm</code> 安装我们需要的 <code>vue</code> 库：</p><pre class="language-bash"><code><span class="token comment"># 添加 --save 参数，会将 vue 依赖添加到 package.json 文件中</span>
<span class="token function">npm</span> <span class="token function">install</span> vue --save
</code></pre><p>然后新建一个 <code>src</code> 目录，在 <code>src</code> 目录下创建一个 <code>app.js</code> 入口文件，代码如下：</p><pre class="language-js"><code><span class="token comment">// 模块化的引入 vue，并将其赋值给 Vue 变量</span>
<span class="token keyword">var</span> Vue <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">&quot;&lt;h1&gt;{{ msg }}&lt;/h1&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'Hello Vue.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>当然 <code>require</code> 函数浏览器是无法识别的，这是就需要通过 <code>webpack</code> 帮我们实现编译打包工作，转化为主流浏览器可是别的 ES5 代码。</p><p>先安装 <code>webpack</code> 包依赖：</p><pre class="language-bash"><code><span class="token comment"># 添加 --save-dev 参数，会将 webpack 开发依赖添加到 package.json 文件中</span>
<span class="token function">npm</span> <span class="token function">install</span> webpack --save-dev
</code></pre><p>然后在项目根目录下创建 <code>webpack.config.js</code> 文件，代码如下：</p><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 入口文件</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
  <span class="token comment">// 编译输出文件</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'build.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 因为我们这里用的是 require 引入方式，所以应该使用vue.common.js/vue.js/vue.min.js</span>
      <span class="token string">'vue$'</span><span class="token punctuation">:</span> <span class="token string">'vue/dist/vue.common.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>因为上面的 <code>index.html</code> 中引入的是编译后的 <code>build.js</code> 文件，要看到开发效果，就需要手动运行 <code>webpack</code> 打包命令：</p><pre class="language-bash"><code>./node_modules/.bin/webpack
</code></pre><blockquote><p>这里如果你想直接运行 <code>webpack</code>，那么就需要你的电脑全局安装 webpack，可以通过运行 <code>npm install webpack -g</code> 命令来全局安装。</p></blockquote><p>然后你会看到输出以下结果：</p><pre class="language-bash"><code>$ webpack
Hash: 8a61c2605578f38f46cd
Version: webpack 3.10.0
Time: 386ms
   Asset    Size  Chunks             Chunk Names
build.js  104 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   <span class="token punctuation">[</span>0<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js 509 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/app.js 148 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    + 4 hidden modules
</code></pre><p>此时根目录下就会出现 <code>build.js</code> 文件，我们再通过浏览器打开 <code>index.html</code> 文件，熟悉的画面出现了，<code>Hello Vue.js</code>。</p><p>到这里一个简单的基于 <code>vue + webpack</code> 的项目就构建完成了，是不是很简单，迫不及待想自己动手试试呢？当然 <code>webpack</code> 的功能远不止如此更详细的功能，请阅读 <a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="noopener noreferrer">官方文档</a>，全面的了解下 <code>webpack</code> 的强大。</p><h2 id="实时重新加载-live-reloading"><a href="#实时重新加载-live-reloading" aria-hidden="true" class="header-anchor">#</a> 实时重新加载(live reloading)</h2><p>上面的例子还有个问题，就是每次我们更新了代码，就需要重新进行打包编译，并手动刷新浏览器，才能看到我们更改的效果，实在是太麻烦了。webpack 作者也考虑到了这个问题，于是同时开发了 <code>webpack-dev-server</code> 工具，来帮助我们实现 <code>live reloading</code> 的功能，也就是当我们更新代码时，浏览器会实时刷新，呈现更新后的效果。</p><p>赶紧用起来~ 先安装下依赖：</p><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack-dev-server --save-dev
</code></pre><p>然后修改 <code>webpack.config.js</code> 配置文件如下：</p><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 入口文件</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
  <span class="token comment">// 编译输出文件</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'build.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 因为我们这里用的是 require 引入方式，所以应该使用vue.common.js/vue.js/vue.min.js</span>
      <span class="token string">'vue$'</span><span class="token punctuation">:</span> <span class="token string">'vue/dist/vue.common.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 这里添加的是有关 webpack-dev-server 的配置</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里定义 webpack-dev-server 开启的web服务的根目录</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>然后执行命令：</p><pre class="language-bash"><code>./node_modules/.bin/webpack-dev-server
</code></pre><p>控制台会输出一下内容：</p><pre class="language-bash"><code>$ ./node_modules/.bin/webpack-dev-server
Project is running at http://localhost:8080/
webpack output is served from /
Content not from webpack is served from ./
Hash: d33155f6797f2c78c448
Version: webpack 3.10.0
Time: 903ms
   Asset    Size  Chunks                    Chunk Names
build.js  627 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
   <span class="token punctuation">[</span>0<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js 509 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>3<span class="token punctuation">]</span> multi <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>-dev-server/client?http://localhost:8080 ./src/app.js 40 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>4<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>-dev-server/client?http://localhost:8080 7.91 kB <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
   <span class="token punctuation">..</span>.
  <span class="token punctuation">[</span>28<span class="token punctuation">]</span> ./node_modules/timers-browserify/main.js 1.9 kB <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    + 15 hidden modules
webpack: Compiled successfully.
</code></pre><p>打开浏览器，访问： http://localhost:8080，此时我们熟悉的画面又出现了，O(∩_∩)O~~。我们再尝试修改 <code>app.js</code> 中 <code>msg</code> 内容，浏览器的内容也会跟着变化，是不是很酷，赶紧动手试试吧。</p><h2 id="使用-npm-脚本"><a href="#使用-npm-脚本" aria-hidden="true" class="header-anchor">#</a> 使用 npm 脚本</h2><p>针对上面的打包命令 <code>./node_modules/.bin/webpack</code> 和实时开发命令 <code>./node_modules/.bin/webpack-dev-server</code>，虽然你可以很快的在命令行复制粘贴输入，但是第一次还是免不了动手输入。作为一个懒惰的程序员，怎么能接受敲击这么多多余的字符呢？正好<code>package.json</code> 文件中 <code>scripts</code> 字段就可以帮助我们解决这个烦恼。</p><p>先来看下介绍：</p><blockquote><p>scripts 是用来指定运行脚本命令的npm命令行缩写的，比如 start 指定了运行 <code>npm run start</code> 时，所要执行的相关命令。</p></blockquote><p>好的，既然明白了它的作用，我们就来尝试改写 <code>package.json</code> 文件，修改 <code>scripts</code> 字段为如下内容：</p><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>
</code></pre><p>然后，在命令行输入：</p><pre class="language-bash"><code><span class="token function">npm</span> run dev
</code></pre><p>你会发现跟执行 <code>./node_modules/.bin/webpack-dev-server</code> 是一样的效果。</p><blockquote><p>注意：这里在 <code>scripts</code> 中指定 <code>webpack-dev-server</code> 命令是，省去了命令路径，这是因为，npm 在执行脚本时，会默认优先执行当前目录下 <code>./node_modules/.bin/</code> 中的命令，如果找不到该命令，则会执行全局命令。</p></blockquote><p>同理，执行 <code>npm run build</code> 就是打包输出我们想要的 <code>build.js</code> 文件。</p><h2 id="css预处理器"><a href="#css预处理器" aria-hidden="true" class="header-anchor">#</a> CSS预处理器</h2><p>虽然 css 已经足够强大，但是在程序员眼里，它一直是个很麻烦的东西，它没有变量，也没有条件语句，只是单纯的一行行的描述，写起来相当麻烦。于是各种 <a href="https://www.catswhocode.com/blog/8-css-preprocessors-to-speed-up-development-time" target="_blank" rel="noopener noreferrer">CSS预处理器</a> 应运而生，其中我最喜欢的是 <a href="http://sass-lang.com/" target="_blank" rel="noopener noreferrer">SASS</a>，使用 sass 语法编写我们的样式文件，会大大提高我们的开发效率，使得 css 工程化变得容易了很多。</p><p>接下来介绍下，如何集成到我们的项目中。</p><p>对于 webpack 来说 <code>一切皆模块</code>，所有的文件通过模块引入的方式形成依赖关系，而对于每个模块的引入或预处理，都是通过 <code>loader</code> 来实现了。因为我们的 <code>sass</code> 语法浏览器是无法识别的，所以在引入时需要使用相关 <code>loader</code> 对其进项预处理，转化为相应的 <code>css</code>。虽然 css 浏览器可以识别的，但是 <code>webpack</code> 本质上是一个 javascript 应用程序的静态模块打包器，一切文件内容都将处理为 javascript，然后进行后期的处理。所以这里除了需要预处理 <code>sass</code> 的 <code>loader</code>，还需要加载 <code>css</code> 的 <code>loader</code>，最后还需要通过 <code>style-loader</code> 来转化为通过 js 的方式动态创建 <code>style</code> 标签到 <code>index.html</code> 中。</p><p>知道了这点，我们就知道要怎么做了，首先安装所需的 <code>loader</code>:</p><pre class="language-bash"><code><span class="token comment"># 因为 `sass-loader` 需要依赖 `node-sass`, 所以这里一并安装</span>
<span class="token function">npm</span> <span class="token function">install</span> style-loader css-loader sass-loader node-sass --save-dev
</code></pre><p>修改 <code>webpack.config.js</code> 配置文件，添加相关 <code>loader</code> 配置：</p><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里用来配置处理不同后缀文件所使用的loader</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'sass-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><blockquote><p>webpack 的 loader 是支持链式传递的，它能够对资源使用流水线(pipline)式处理，一组链式的 loader 将按照相反顺序依次处理，这里的处理流程就是：
sass-loader -&gt; css-loader =&gt; style-loader</p></blockquote><p>配置好了，我们现在来测试下，在 <code>src</code> 目录下创建一个 <code>app.scss</code> 文件，内容如下：</p><pre class="language-scss"><code><span class="token property"><span class="token variable">$red</span></span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>218, 42, 42<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token selector">h1 </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>然后在 <code>src/app.js</code> 文件中引入：</p><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./app.scss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Vue <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">&quot;&lt;h1&gt;{{ msg }}&lt;/h1&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'Hello Vue.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>此时再运行 <code>npm run dev</code>，你会发现我们的 <code>h1</code> 标签颜色变了。通过审核元素，可以发现 <code>index.html</code> 的 <code>head</code> 标签中新增了一个 <code>style</code> 标签，内容就是，<code>app.scss</code> 编译输出的内容：</p><pre class="language-css"><code><span class="token selector">h1</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #da2a2a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>如果还不清楚 <code>sass</code> 用法的，建议去看看这篇基础介绍文档：<a href="http://www.ruanyifeng.com/blog/2012/06/sass.html" target="_blank" rel="noopener noreferrer">SASS用法指南</a></p><h2 id="图片加载"><a href="#图片加载" aria-hidden="true" class="header-anchor">#</a> 图片加载</h2><p>既然说到了 css 静态资源，自然免不了对于图片的加载了。上文说过，在 webpack 中，一切皆模块，图片当然也是以模块的方式引入的。既然是模块，自然少不了相关引入的 loader，这里图片引入我们使用到的是 <code>url-loader</code>，先安装下：</p><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> url-loader --save-dev
</code></pre><p>添加 <code>url-loader</code> 配置：</p><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里用来配置处理不同后缀文件所使用的loader</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(jpe?g|gif|png)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'url-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>然后再 <code>app.js</code> 中引入：</p><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./app.scss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Vue <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> logoSrc <span class="token operator">=</span>  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./logo.jpg'</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'Hello Vue.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span> <span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          domProps<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            src<span class="token punctuation">:</span> logoSrc<span class="token punctuation">,</span>
            alt<span class="token punctuation">:</span> <span class="token string">'logo'</span><span class="token punctuation">,</span>
            className<span class="token punctuation">:</span> <span class="token string">'logo'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote><p>这里我们用 <code>render</code> 函数来自定义渲染我们的节点，它含有默认参数 <code>h</code> 就是我们 <a href="https://yugasun.com/post/you-may-not-know-vuejs-1.html" target="_blank" rel="noopener noreferrer">花式渲染目标元素</a> 讲到的 <code>createElement</code> 参数的别名而已，这里为了书写简单。<code>h</code> 函数的第一个参数为 <code>dom</code> 名称，第二个参数为创建时配置对象，通过 <code>domProps</code> 来添加 DOM 相关的属性值。这里将我们引入的 <code>logoSrc</code> 赋值给它的 <code>src</code> 属性。</p></blockquote><p>然后再重新运行 <code>npm run dev</code>，页面中就出现了我们想要的 <code>logo</code> 图片了。</p><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2><p><code>知己知彼，百战不殆</code>，我们只有真正了解了 <code>webpack</code> 的使用技巧，在实际开发中，我们才会更加的得心应手。不至于被一个莫名其妙的错误个吓到。程序员有三宝：<code>多学习，多编写，多总结</code>，我们的编程技巧才能才会不断提高。</p><p><a href="https://github.com/yugasun/You-May-Not-Know-Vuejs/blob/master/chapter2/1" target="_blank" rel="noopener noreferrer">源码在此</a></p><h2 id="专题目录"><a href="#专题目录" aria-hidden="true" class="header-anchor">#</a> 专题目录</h2><p><a href="https://github.com/yugasun/You-May-Not-Know-Vuejs#%E6%96%87%E7%AB%A0%E7%9B%B4%E9%80%9A%E8%BD%A6" target="_blank" rel="noopener noreferrer">You-May-Not-Know-Vuejs</a></p></div><div class="content edit-link"><a href="https://github.com/yugasun/You-May-Not-Know-Vuejs/edit/master/docs/art/you-may-not-know-vuejs-5.md" target="_blank" rel="noopener noreferrer">错别字纠正</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-4.html" class="prev">
          组件式开发
        </a></span><span class="next"><a href="/You-May-Not-Know-Vuejs/art/you-may-not-know-vuejs-6.html">
          单文件组件
        </a> →
      </span></p></div></div></div></div>
    <script src="/You-May-Not-Know-Vuejs/assets/js/app.8c16a5c0.js" defer></script><script src="/You-May-Not-Know-Vuejs/assets/js/15.f98ca526.js" defer></script>
  </body>
</html>
