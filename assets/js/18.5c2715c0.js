(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{56:function(t,e,s){"use strict";s.r(e);var n=s(0),a=Object(n.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"使用eslint检查代码质量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用eslint检查代码质量","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用ESLint检查代码质量")]),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[t._v("#")]),t._v(" 前言")]),s("p",[t._v("Javascript 是一门弱类型语言，所以语法检查变得尤为重要。虽然有很多前端IDE开发工具，可以很好地帮助我们提示在编写时的错误，但是大多数开发者还是使用的像 "),s("code",[t._v("Sublime Text")]),t._v("、"),s("code",[t._v("Visual Studio Code")]),t._v(" 之类的轻量级编辑器，这导致在开发中很容易出现各种错误，比如单词拼写错误，漏掉了括号等。而且每个人的代码编写习惯也不一样，因此有的项目的代码格式千差万别，比如 "),s("code",[t._v("缩进空格数")]),t._v("，有的习惯4个，有的习惯2个，这也导致项目维护起来越来越麻烦，遇到错误也很难定位。因此对 "),s("code",[t._v("Javascript")]),t._v(" 进行语法检查的工具应运而生，目前 "),s("a",{attrs:{href:"https://eslint.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ESLint")]),t._v(" 使用最为广泛。这篇将讲解如何将 "),s("code",[t._v("ESLint")]),t._v(" 集成到我们的项目中。")]),s("h2",{attrs:{id:"配置方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置方式")]),s("p",[t._v("ESLint 具有高可配置行，这就意味着你可以根据项目需求定制代码检查规则。ESLint 的配置方式可以有以下两种方式：")]),s("ul",[s("li",[t._v("文件注释：在 Javascript 文件中使用注释包裹配置内容。")]),s("li",[t._v("配置文件("),s("strong",[t._v("推荐")]),t._v(")：在项目根目录下创建包含检查规则的 "),s("code",[t._v(".eslintrc.*")]),t._v(" 文件。")])]),s("h2",{attrs:{id:"扩展配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 扩展配置文件")]),s("p",[t._v("ESLint 配置文件中的 "),s("code",[t._v("extends")]),t._v(" 字段可以扩展集成现有的规则，比如著名的 "),s("a",{attrs:{href:"https://github.com/airbnb/javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Airbnb JavaScript Style")]),t._v("，可以通过安装 "),s("code",[t._v("eslint-config-airbnb-base")]),t._v(" 集成使用。")]),s("h2",{attrs:{id:"开始使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 开始使用")]),s("p",[t._v("因为本人比较偏向于 "),s("a",{attrs:{href:"https://github.com/airbnb/javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Airbnb JavaScript Style")]),t._v("，所以今后的代码规范将均使用此规范。并且我们这里是 Vuejs 项目，所以需要同时对 "),s("code",[t._v(".vue")]),t._v(" 文件中的 js 代码进行检测，就需要利用 "),s("code",[t._v("eslint-plugin-vue")]),t._v(" 插件来搭配使用。")]),s("p",[t._v("首先，安装依赖：")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" eslint eslint-config-airbnb-base eslint-plugin-import eslint-plugin-vue --save-dev\n")])]),s("p",[t._v("其次，在项目根目录下新建 "),s("code",[t._v(".eslintrc.js")]),t._v(" 文件，配置如下：")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'plugin:vue/essential'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'airbnb-base'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("最后，在 "),s("code",[t._v("package.json")]),t._v(" 中添加 "),s("code",[t._v("lint")]),t._v(" 脚本:")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --ext .js,.vue src"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])]),s("blockquote",[s("p",[t._v("当然你也可以全局安装以上依赖，这样你可以直接运行 "),s("code",[t._v("eslint --ext .js,.vue src")]),t._v(" 命令。")])]),s("p",[t._v("Ok， 配置好了~")]),s("p",[t._v("命令行运行 "),s("code",[t._v("npm run lint")]),t._v("，输出如下：")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run lint\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" vue-webpack-demo@0.0.1 lint /Users/Yuga/Desktop/VueLearning/You-May-Not-Know-Vuejs/chapter2/4\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eslint --ext .js,.vue src\n\n/Users/Yuga/Desktop/VueLearning/You-May-Not-Know-Vuejs/chapter2/4/src/hello1.vue\n  17:16  error    Missing trailing comma        comma-dangle\n  26:9   warning  Unexpected console statement  no-console\n  38:9   warning  Unexpected console statement  no-console\n\n/Users/Yuga/Desktop/VueLearning/You-May-Not-Know-Vuejs/chapter2/4/src/utils.js\n  15:3  warning  Unexpected console statement  no-console\n\n✖ 4 problems "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1 error, 3 warnings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  1 error, 0 warnings potentially fixable with the "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--fix"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" option.\n")])]),s("p",[t._v("你会发现检查出一堆错误，"),s("em",[s("strong",[t._v("不要方")])]),t._v("，输出的错误说明的非常明显，只需要根据错误提示行号去检查，然后根据规则更改就行了。")]),s("p",[t._v("上面的命令中 "),s("code",[t._v("--ext")]),t._v(" 参数就是用来指定需要检查的扩展名的文件，"),s("code",[t._v("src")]),t._v(" 就是指定检查的目录。")]),s("h2",{attrs:{id:"添加自定义规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加自定义规则","aria-hidden":"true"}},[t._v("#")]),t._v(" 添加自定义规则")]),s("p",[t._v("虽然 "),s("code",[t._v("Airbnb")]),t._v(" 的代码风格已经很成熟了，但是并不是满足任何人需求的。有些时候，如果想修改一些规则怎么办？这时我们可以通过在 "),s("code",[t._v(".eslintrc.js")]),t._v(" 文件中添加 "),s("code",[t._v("rules")]),t._v(" 字段来自定义。规则 "),s("a",{attrs:{href:"https://eslint.org/docs/rules/no-console",target:"_blank",rel:"noopener noreferrer"}},[t._v("no-console")]),t._v(" 就是用来规定禁止使用 "),s("code",[t._v("console")]),t._v(" 来调试程序，"),s("code",[t._v("Airbnb")]),t._v(" 代码风格在检查是会输出如下警告：")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("/Users/Yuga/Desktop/VueLearning/You-May-Not-Know-Vuejs/chapter2/4/src/hello1.vue\n  26:9  warning  Unexpected console statement  no-console\n")])]),s("p",[t._v("但是我们有些时候项目经常使用到 "),s("code",[t._v("console")]),t._v("，所以我会关闭该条规则，修改 "),s("code",[t._v(".eslintrc.js")]),t._v(" 文件如下：")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'plugin:vue/essential'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'airbnb-base'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  rules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-console'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'off'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("这样在运行 "),s("code",[t._v("npm run lint")]),t._v(" 时，命令行就不会输出 "),s("code",[t._v("no-console")]),t._v(" 警告了。")]),s("blockquote",[s("p",[t._v("有关 ESLint 的基础教程请阅读 "),s("a",{attrs:{href:"http://javascript.ruanyifeng.com/tool/lint.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ESLint")]),t._v("，关于 "),s("code",[t._v("Airbnb")]),t._v(" 代码规范，请阅读 "),s("a",{attrs:{href:"https://github.com/airbnb/javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Airbnb JavaScript Style")]),t._v("。")])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),s("p",[t._v("读完你会发现，之前自己一直不敢使用的 "),s("code",[t._v("ESLint")]),t._v(" 是如此的简单，无论是安装还是配置，非常的人性化。")]),s("p",[t._v("作为一名优秀的程序员，规范化的代码风格尤为重要，这不仅能降低代码出错率，而且非常有益于别人阅读你的代码。说到代码阅读，代码注释也是必不可少的。俗话说 "),s("code",[t._v("己所不欲，勿施于人")]),t._v("，如果你不想阅读 "),s("code",[t._v("shit")]),t._v(" 一样的代码，那么就先从自身做起，赶紧在你的项目中实践起来吧~")]),s("p",[s("a",{attrs:{href:"https://github.com/yugasun/You-May-Not-Know-Vuejs/blob/master/chapter2/4",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码在此")])]),s("h2",{attrs:{id:"专题目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#专题目录","aria-hidden":"true"}},[t._v("#")]),t._v(" 专题目录")]),s("p",[s("a",{attrs:{href:"https://github.com/yugasun/You-May-Not-Know-Vuejs#%E6%96%87%E7%AB%A0%E7%9B%B4%E9%80%9A%E8%BD%A6",target:"_blank",rel:"noopener noreferrer"}},[t._v("You-May-Not-Know-Vuejs")])])])}],!1,null,null,null);e.default=a.exports}}]);